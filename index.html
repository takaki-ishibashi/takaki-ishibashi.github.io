<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <titel>Cache then network</titel>
    <style>
      body {
        font-family: monospace;
        font-size: 1rem;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <label>Data: </label><output id='data'></output>
    <label>Cache: </label><output id='cacheStatus'></output>
    <label>Network: </label><output id='networkStatus'></output>
  
    <form>Cache:
      <input id='cacheFail' type='checkbox'>Fail</input>
      Delay: <input id='cacheDelay' type='number' value='500'></input>ms
    </form>
  
    <form>Network:
      <input id='networkFail' type='checkbox'>Fail</input>
      Delay: <input id='networkDelay' type='number' value='1250'></input>ms
    </form>
  
    <button id='getDataButton'>Get new data</button>
  
    <script src='./index.js'></script>
    <script>
      'use strict';
      (()=>{
        var cacheName = 'what-is-cache';
        var dataURL = 'https://data.com';
        var fd = new FormData();
        var now = Date.now();
        fd.append('now',now);
        var myRes = new Response(fd, {'status':200, 'statusText':'OK', 'headers':'HOGE!'});
        
        caches.open(cacheName).then((cache)=>{
          cache.put(dataURL,myRes);
        })
        .then(()=>{
          caches.match(dataURL).then((res)=>{
            console.log(res);
          });
        });
      })();
    </script>
  </body>
</html>
